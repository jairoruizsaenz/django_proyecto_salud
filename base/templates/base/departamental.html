<!-- templates/departamental.html -->
{% extends 'base.html' %}
{% load static %}
{% block referencia %}departamental.html{% endblock %}
{% block title_1 %}Departamental{% endblock %}
{% block title_2 %}Departamental{% endblock %}

{% block content %}
<p>{{ mensaje }}</p>

    <div class="row">
        <div class="col-md-2">
            <div class="form-group">
                <label for="selection_tipo_grafico">Tipo de gráfico</label>
                <select class="form-select  form-select-sm" aria-label="Default select example" id="selection_tipo_grafico" onchange="controlObjetos()">
                    <option value="map" selected>Mapa</option>
                    <option value="radar">Radar</option>
                </select>
            </div>
        </div>
        <div class="col-md-2" style="margin-top: 25px">
            <div class="form-group">
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="compareCheck" onclick="controlObjetos()">
                    <label class="form-check-label" for="compareCheck">Comparar</label>
                </div>
            </div>
        </div>
    </div>

    <hr>

    <!-- Presentar - Mapa -->
    <div id="section1">
        <div class="row">
            <p style="color:red;">section1</p>
            <div class="col-md-4">
                <div class="form-group">
                    <label for="selection_departamento_1">Departamento</label>
                    <select class="form-select  form-select-sm" aria-label="Default select example" id="selection_departamento_1">
                        <option value="0" selected>----------</option>
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option> 
                    </select>
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label for="selection_dimension_1">Dimensión</label>
                    <select class="form-select  form-select-sm" aria-label="Default select example" id="selection_dimension_1">
                        <option value="accesibilidad" selected>Accesibilidad</option>
                        <option value="calidad">Calidad</option>
                        <option value="disponibilidad">Disponibilidad</option>
                        <option value="poblacion">Población</option>
                        <option value="utilizacion">Utilización</option>
                    </select>
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label for="selection_indicador_1">Indicador</label>
                    <select class="form-select  form-select-sm" aria-label="Default select example" id="selection_indicador_1">
                        <option value="0" selected>----------</option>
                        {% comment %} 
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option> 
                        {% endcomment %}
                    </select>
                </div>
            </div>
        </div>
        <div class="row" style="margin-top:16px;">
            <div class="col-md-6">
                <div>
                    map1
                    <div id="map1" style="height: 480px;"></div>
                </div>
            </div>
            <div class="col-md-6">
                <div>
                    radar - presentar
                    <div id="radar1" style="height: 480px;"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Comparar - Mapa -->
    <div id="section2">
        <div class="row">
            <p style="color:red;">section2</p>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="selection_departamento_2">Departamento</label>
                    <select class="form-select  form-select-sm" aria-label="Default select example" id="selection_departamento_2">
                        <option value="0" selected>----------</option>
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option> 
                    </select>
                </div>
                <div class="form-group">
                    <label for="selection_dimension_2">Dimensión</label>
                    <select class="form-select  form-select-sm" aria-label="Default select example" id="selection_dimension_2">
                        <option value="accesibilidad" selected>Accesibilidad</option>
                        <option value="calidad">Calidad</option>
                        <option value="disponibilidad">Disponibilidad</option>
                        <option value="poblacion">Población</option>
                        <option value="utilizacion">Utilización</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="selection_indicador_2">Indicador</label>
                    <select class="form-select  form-select-sm" aria-label="Default select example" id="selection_indicador_2">
                        <option selected>----------</option>
                        {% comment %} 
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option> 
                        {% endcomment %}
                    </select>
                </div>
                <div style="margin-top:16px;">
                    map2
                    <div id="map2" style="height: 480px;"></div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="selection_departamento_3">Departamento</label>
                    <select class="form-select  form-select-sm" aria-label="Default select example" id="selection_departamento_3">
                        <option value="0" selected>----------</option>
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option> 
                    </select>
                </div>
                <div class="form-group">
                    <label for="selection_dimension_3">Dimensión</label>
                    <select class="form-select  form-select-sm" aria-label="Default select example" id="selection_dimension_3">
                        <option value="accesibilidad" selected>Accesibilidad</option>
                        <option value="calidad">Calidad</option>
                        <option value="disponibilidad">Disponibilidad</option>
                        <option value="poblacion">Población</option>
                        <option value="utilizacion">Utilización</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="selection_indicador_3">Indicador</label>
                    <select class="form-select  form-select-sm" aria-label="Default select example" id="selection_indicador_3">
                        <option selected>----------</option>
                        {% comment %} 
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option> 
                        {% endcomment %}
                    </select>
                </div>
                <div style="margin-top:16px;">
                    map3
                    <div id="map3" style="height: 480px;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Comparar - Radar -->
    <div id="section4">
        <div class="row">
            <p style="color:red;">section4</p>
            <div class="col-md-4">
                <div class="form-group">
                    <label for="selection_departamento_1">Departamento</label>
                    <select class="form-select  form-select-sm" aria-label="Default select example" id="selection_departamento_5">
                        <option value="0" selected>----------</option>
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option> 
                    </select>
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label for="selection_dimension_1">Dimensión</label>
                    <select class="form-select  form-select-sm" aria-label="Default select example" id="selection_dimension_5" onchange="indicadorPersonalizado()">
                        <option value="accesibilidad" selected>Accesibilidad</option>
                        <option value="calidad">Calidad</option>
                        <option value="disponibilidad">Disponibilidad</option>
                        <option value="poblacion">Población</option>
                        <option value="utilizacion">Utilización</option>
                        <option value="personalizado">Personalizado</option>
                    </select>
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label for="selection_indicador_1">Indicador</label>
                    <select class="form-select  form-select-sm" aria-label="Default select example" id="selection_indicador_5">
                        <option value="0" selected>----------</option>
                        {% comment %} 
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option> 
                        {% endcomment %}
                    </select>
                </div>
            </div>
        </div>

        <div id="section5">
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label for="selection_dimension_1">Indicador</label>
                        <select class="form-select  form-select-sm" aria-label="Default select example" id="selection_dimension_6" onchange="indicadorPersonalizado()">
                            <option value="0" selected>----------</option>
                            {% comment %} 
                            <option value="1">One</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option> 
                            {% endcomment %}
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <div class="row" style="margin-top:16px;">
            <div class="col-md-12">
                <div>
                    radar - presentar
                    <div id="radar2" style="height: 480px;"></div>
                </div>
            </div>
        </div>
    </div>


    <script>
        function controlObjetos() {
            var section1 = document.getElementById("section1"); // Presentar - Mapa
            var section2 = document.getElementById("section2"); // Comparar  - Mapa            
            var section4 = document.getElementById("section4"); // Comparar  - Radar

            var tipo_grafico = document.getElementById('selection_tipo_grafico');
            var tipo_grafico_value = tipo_grafico.options[tipo_grafico.selectedIndex].value;
            
            var compareCheck = document.getElementById('compareCheck');
            var compareCheck_value = compareCheck.checked;

            console.log('tipo_grafico:', tipo_grafico_value, ' - ', 'compareCheck:', compareCheck_value);

            section1.classList.remove("visible");
            section2.classList.remove("visible");            
            section4.classList.remove("visible");

            section1.classList.add("hidden");
            section2.classList.add("hidden");            
            section4.classList.add("hidden");

            if (tipo_grafico_value == 'map' && compareCheck_value == false ) {
                section1.classList.add("visible");
                section1.classList.remove("hidden");
            } else if (tipo_grafico_value == 'map' && compareCheck_value == true ) {
                section2.classList.add("visible");
                section2.classList.remove("hidden");
            } else if (tipo_grafico_value == 'radar' && compareCheck_value == true ) {
                section4.classList.add("visible");
                section4.classList.remove("hidden");
            } else {
                console.log('Error - controlObjetos()');
            }
        };
        controlObjetos();
    </script>
    
    <script>        
        function indicadorPersonalizado() {
            console.log('indicadorPersonalizado()');
            var dimension = document.getElementById('selection_dimension_5');
            var dimension_value = dimension.options[dimension.selectedIndex].value;
            console.log(dimension_value);
            
            var nueva_selection_indicador = document.getElementById("section5");
            section5.classList.remove("visible");
            section5.classList.add("hidden");

            if (dimension_value == 'personalizado') {
                document.getElementById("selection_indicador_5").disabled = true;
                section5.classList.remove("hidden");
                section5.classList.add("visible");
            } else {
                document.getElementById("selection_indicador_5").disabled = false;
            }
            
        };
        indicadorPersonalizado()
    </script>

    <script>
        function polystyle(feature) {
            return {
                fillColor: 'blue',
                weight: 0.8,
                opacity: 1,
                color: 'white',  //Outline color
                fillOpacity: 0.4
            };
        }
                
        var map1 = L.map('map1').setView([4.683709901063048, -74.05116825770746], 5);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map1);

        var polyData1 = "{% static 'json/MunicipiosVeredas_2MB.json' %}"
        $.getJSON(polyData1, function (data) {
            L.geoJson(data, {style: polystyle}).addTo(map1);
            // console.log(data);
        });
    </script>

    <script>
        var map2 = L.map('map2').setView([4.683709901063048, -74.05116825770746], 5);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map2);

        var polyData2 = "{% static 'json/MunicipiosVeredas_2MB.json' %}"
        $.getJSON(polyData2, function (data) {
            L.geoJson(data, {style: polystyle}).addTo(map2);
            // console.log(data);
        });
    </script>

    <script>
        var map3 = L.map('map3').setView([4.683709901063048, -74.05116825770746], 5);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map3);
        
        var polyData3 = "{% static 'json/MunicipiosVeredas_2MB.json' %}"
        $.getJSON(polyData3, function (data) {
            L.geoJson(data, {style: polystyle}).addTo(map3);
            // console.log(data);
        });
    </script>

    <script>
        data = [{
            type: 'scatterpolar',
            r: [39, 28, 8, 7, 28, 39],
            theta: ['A','B','C', 'D', 'E', 'A'],
            fill: 'toself'
          }]
          
        layout = {
        polar: {
            radialaxis: {
            visible: true,
            range: [0, 50]
            }
        },
        showlegend: false
        }
          
        Plotly.newPlot("radar1", data, layout)
    </script>

    <script>
    data = [
        {
            type: 'scatterpolar',
            r: [39, 28, 8, 7, 28, 39],
            theta: ['A','B','C', 'D', 'E', 'A'],
            fill: 'toself',
            name: 'Group A'
        },
        {
            type: 'scatterpolar',
            r: [1.5, 10, 39, 31, 15, 1.5],
            theta: ['A','B','C', 'D', 'E', 'A'],
            fill: 'toself',
            name: 'Group B'
        }
      ]
      
      layout = {
        polar: {
          radialaxis: {
            visible: true,
            range: [0, 50]
          }
        }
      }
      
      Plotly.newPlot("radar2", data, layout)
    </script>
    
{% endblock %}